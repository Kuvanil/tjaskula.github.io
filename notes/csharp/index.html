
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Tomasz Jaskula's blog</title>
    <link rel="stylesheet" href="http://jaskula.fr//stylesheets/bootstrap/less/bootstrap.css">
    <link rel="stylesheet" href="http://jaskula.fr//stylesheets/pygment_trac.css">
    <link rel="shortcut icon" href="http://jaskula.fr//favicon.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="C# language learning notes. C# (pronounced as see sharp) is a multi-paradigm programming language encompassing strong typing,  imperative, declarative, functional, generic, object-oriented (class-based), and component-oriented programming disciplines. It was developed by Microsoft within its .NET initiative and later approved as a standard by Ecma (ECMA-334) and ISO (ISO/IEC 23270:2006). C# is one of the programming languages designed for the Common Language Infrastructure." />
    <meta name="author" content="Tomasz Jaskuła" />
    <meta name="copyright" content="Tomasz Jaskuła 2015" />

    <!-- Twitter cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:creator" content="@tjaskula">
    <meta name="twitter:title" content="C# Language learning notes. Only things I have to remember.">
    <meta name="twitter:description" content="C# language learning notes. C# (pronounced as see sharp) is a multi-paradigm programming language encompassing strong typing,  imperative, declarative, functional, generic, object-oriented (class-based), and component-oriented programming disciplines. It was developed by Microsoft within its .NET initiative and later approved as a standard by Ecma (ECMA-334) and ISO (ISO/IEC 23270:2006). C# is one of the programming languages designed for the Common Language Infrastructure.">
    
    <!-- End Twitter cards -->

    <link rel="alternate" type="application/rss+xml" title="Tomasz Jaskula's blog" href="http://jaskula.fr/rss.xml" />

      <!--<script>
          (function(d) {
              var config = {
                          kitId: 'xfo7ulp',
                          scriptTimeout: 3000
                      },
                      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='//use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
          })(document);
      </script>-->
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!-- FSharp.Formatting Styles --> 
    <link rel="stylesheet" type="text/css" media="screen" href="http://jaskula.fr//fsharp.formatting/tooltips.css" />
  	<script type="text/javascript" src="http://jaskula.fr//fsharp.formatting/tooltips.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-58152976-1', 'auto');
        ga('send', 'pageview');

    </script>

  </head>
  <body>

	  <header>

        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <h1><a class="" href="http://jaskula.fr//index.html">Tomasz Jaskula's blog</a>
                <small>Improve signal, reduce noise = use F#</small>
            </h1>
        </div>

        <nav class="collapse navbar-collapse bs-navbar-collapse">
          <ul class="nav navbar-nav">
              <li>
                  <a href="http://jaskula.fr//blog/">Blog</a>
              </li>
              <li>
                  <A HREF="http://jaskula.fr//talks/">Talks</A>
              </li>
              <!-- <li class="active">
                    <a href="http://jaskula.fr//talks/">Talks</a>
              </li> -->
          </ul>
        </nav>

    </header>

    <div class="container">
      <div class="row">
        <main class="col-lg-8">
              

<h1>C# Language</h1>
<h2>Object Orientation</h2>
<p>Object-orientation paradigm, includes:</p>
<ul>
<li>encapsulation</li>
<li>inheritance</li>
<li>polymorphisme</li>
</ul>
<h3>Inheritance</h3>
<p>A class can <em>inherit</em> from another class to extend or customize the original class.</p>
<h3>Encapsulation</h3>
<p>Means creating a boundary around <em>object</em>, to separate external (public) behavior from its internal (private) implementation details.</p>
<h3>Polymporphisme</h3>
<ul>
<li>An instance of type x can refer to the object that subclasses x</li>
<li>Upcast : =&gt; to the reference of the base class (Implicit)</li>
<li>Downcast : =&gt; to the reference of the subclass (Explicit)</li>
</ul>
<h2>Characteristics of C#</h2>
<p>C# is:</p>
<ul>
<li>Type-safe : cannot interact with <code>string</code> as it was an <code>integer</code></li>
<li>Staticly-typed : language enforces type safety at compile time</li>
<li>Strongly-types : cannot get around the restrictions the constraints of the type system like for example calling a function that's designed to accept an integer with a floating-point number, unless you first <em>explicitly</em> convert floating-point number to an integer.</li>
</ul>
<h2>Object</h2>
<h3>Value and Reference Types</h3>
<p><em>Value types</em> : numeric types, <code>char</code> type, <code>bool</code> type, <code>struc</code> and <code>enum</code> types.</p>
<p><em>Reference types</em> : all class, array, delegate and interface types.</p>
<h4>Value types</h4>
<p>The content of a <em>value type</em> variable or constant is simply a value.</p>
<p>Numeric types</p>
<ul>
<li>Integral : <code>sbyte</code> (8bits), <code>short</code> (16 bits), <code>int</code> (32 bits), <code>long</code> (64 bits).</li>
<li>Real : <code>float</code> (32 bits, <span class="math">\(10^{-45}\)</span> to <span class="math">\(10^{38}\)</span>), <code>double</code> (64 bits, <span class="math">\(10^{-324}\)</span> to <span class="math">\(10^{308}\)</span>), <code>decimal</code> (128 bits, <span class="math">\(10^{-28}\)</span> to <span class="math">\(10^{28}\)</span>)</li>
</ul>
<p><code>decimal</code> is non-native to processor (about 10 times slower than <code>double</code>)</p>
<blockquote>
<p>The arithmetic operators (+, -, *, /, %) are definied for all numeric types except the 8- and 16-bit integral types. So C# converts them to larger types as required.</p>
</blockquote>
<h4>Reference types</h4>
<p>Reference types have two parts: an <em>object</em> and the <em>reference</em> to that object. The content of a reference-type variable or constant is a reference to an object that contains the value.
Reference types requires spearate allocations of membory for the reference and the object. The object consumes as many bytes as its fields plus aditional administrative overhead.</p>
<h4>The Stack and the Heap</h4>
<p><em>Stack</em> is a block of memory for storing local variables and parameters. the stack logically grows and shrinks as a function is entered and exited.</p>
<p><em>Heap</em> is a block of memory where <code>objects</code> (i.e., reference-type instances) reside. GC scans only heap.</p>
<h3>Boxing : value-type =&gt; reference</h3>
<p><a href="http://theburningmonk.com/2015/07/beware-of-implicit-boxing-of-value-types/">When does the implicit boxing occurs?</a></p>
<ul>
<li>When you invoke a virtual method</li>
</ul>
<p>Value types inherit from the <code>System.ValueType</code>, which itself inherits from <code>System.Object</code>. Amongst other things, <code>System.ValueType</code> provides an override for <code>Equals</code> that gives value types the default compare-by-value behaviour.
However, a value types is stored in memory without the Method Table Pointer so in order to dispatch a virtual method call it'll first have to be boxed into a reference type first.</p>
<ul>
<li>When you call <code>List&lt;T&gt;.Contains</code></li>
</ul>
<p>When you call <code>List&lt;T&gt;.Contains</code>, an instance of <code>EqualityComparer&lt;T&gt;</code> will be used to compare the argument against every element of the list.
This eventually causes a new <code>EqualityComparer&lt;T&gt;</code> to be created.
In the default case where the struct doesn't implement the <code>IEquatable&lt;T&gt;</code> interface, the <code>ObjectEqualityComparer&lt;T&gt;</code> will be returned. And it is in here, that the overridden/inherited <code>Equals(object other)</code> method will be used and causes boxing to occur for every comparison!
If, on the other hand, struct implements the <code>IEquatable&lt;T&gt;</code> interface then the outcome will be very different. This allows some clever logic to kick in and use the overloaded <code>Equals(MyStruct other)</code> instead.</p>
<ul>
<li>When you invoke an interface method</li>
</ul>
<p>Like virtual methods, in order to dispatch an interface method you also need the <em>Method Table Pointer</em>, which means boxing is required.
Fortunately, the CLR is able to short-circuit this by calling the method directly if the compile-time type is resolved to the actual value type (e.g. MyStruct) rather than the interface type.</p>
<ul>
<li>When <code>Dictionary&lt;T&gt;</code> invokes <code>GetHashCode</code></li>
</ul>
<p><code>GetHashCode</code> is used by hash-based collection types, the most common being <code>Dictionary&lt;TKey, TValue&gt;</code> and <code>HashSet&lt;T&gt;</code>.
In both cases, it's invoked through the <code>IEqualityComparer&lt;T&gt;</code> type we talked earlier, and in both cases the comparer is also initialized through <code>EqualityComparer&lt;T&gt;.Default</code> and the <code>CreateComparer</code> method.
<code>GetHashCode</code> is invoked in many places within <code>Dictionary&lt;TKey, TValue&gt;</code> - on <code>Add</code>, <code>ContainsKey</code>, <code>Remove</code>, etc.</p>
<ul>
<li>Interfaces and Boxing</li>
</ul>
<p>Casting a struct to an interface causes boxing. Callin an implicitly implemented member on a struct des not cause boxing.</p>
<h3>Unboxing : reference type =&gt; value-type</h3>
<h2>Creating types</h2>
<h3>Writing a Class Versus an Interface</h3>
<p>As a guideline:</p>
<ul>
<li>Use classes and subclasses for types that naturally share an implementation.</li>
<li>Use interfaces for types that have independent implementations.</li>
</ul>
<h3>Constructors</h3>
<p>Constructor with optional parameters may be problematic if it is instantiated from another assemblie. If we add another optional parameter we have to recompile all consuming assemblies because they will continue to call the non existing constructor and fail at runtime. the subtler problem is when we change a value of one of the optional parameters, the callers will continue to call with the old value until they are recompiled. Hence <strong>avoid optional parameters in public functions</strong>.</p>
<p>A static constructor executes once per <em>type</em>, rather than once per <em>instance</em>. A type can define only one static constructor, and it must be parameterless and have the same name as thr type. The constructor is triggerted either by:</p>
<ul>
<li>Instantiating the type</li>
<li>Accessing a static member in the type</li>
</ul>
<p>If type has static fields, they will be initialized <em>before</em> the static constructor.</p>
<h3>Method overloading</h3>
<p>Inheritance has an interesting impact on method overloading. Consider the following two overloads:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="csharp"><span class="k">static</span> <span class="k">void</span> Foo (Asset a) { }
<span class="k">static</span> <span class="k">void</span> Foo (House h) { }
</code></pre></td></tr></table>
<p>When an overload is called, the most specific type has precedence:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="csharp">House h <span class="o">=</span> <span class="k">new</span> House (<span class="o">.</span><span class="o">.</span><span class="o">.</span>);
Foo(h); <span class="c">// Calls Foo(House)</span>
</code></pre></td></tr></table>
<p>The particular overload to call is <strong>determined statically (at compile time)</strong> rather than at runtime.
The following code calls Foo(Asset), even though the runtime type of a is House:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="csharp">Asset a <span class="o">=</span> <span class="k">new</span> House (<span class="o">.</span><span class="o">.</span><span class="o">.</span>);
Foo(a); <span class="c">// Calls Foo(Asset)</span>
</code></pre></td></tr></table>
<blockquote>
<p>If you cast Asset to dynamic , the decision as to which overload to call is deferred until runtime, and is then based on the object’s actual type:</p>
</blockquote>
<table class="pre"><tr><td class="lines"><pre class="fssnip"><span class="l">1: </span>
<span class="l">2: </span>
</pre></td>
<td class="snippet"><pre class="fssnip highlighted"><code lang="csharp">Asset a <span class="o">=</span> <span class="k">new</span> House (<span class="o">.</span><span class="o">.</span><span class="o">.</span>);
Foo ((<span class="k">dynamic</span>)a); <span class="c">// Calls Foo(House)</span>
</code></pre></td></tr></table>
<h3>Abstract classes</h3>
<p>A class declared as <em>abstract</em> can never be instantiated. Instead, only its concrete <em>subclasses</em> can be instantiated.</p>
<h3>Structs</h3>
<p>A <code>struct</code> is similar to a class with the following key differences:</p>
<ul>
<li>A struct is a value type, whereas a class is a reference type.</li>
<li>A struct does not support inheritance (other than implicitly deriving from <code>object</code>, or more precisely, <code>System.ValueType</code>).</li>
</ul>
<p>A struct can have all the mebers a class can, except the following:</p>
<ul>
<li>A parameterless constructor</li>
<li>A finalizer</li>
<li>Virtual members</li>
</ul>
<p>Struct can implement interfaces.</p>
<h3>Constants</h3>
<p>Difference between <code>consts</code> and <code>static readonly</code>: A <code>static readonly</code> field is avantageous when exposing to other assemblies a value that might change in a later version. For instance, suppose assembly X exposes a constant as follows: <code>public const int MaximumThreads = 20;</code>. If assembly Y references X and uses this constant, the value 20 will be baked into the assembly Y when compiled. This means that if X is later recompiled with the constant set to 50, Y will still use the old value <em>until</em> Y is <em>recompiled</em>. A <code>static readonly</code> field avoids this problem.</p>
<h3>Enums</h3>
<p>Numeric constants grouped and named. By default its underlying values are of type <code>int</code>. You may specify an alternative integral type (<code>byte</code>, <code>long</code>, etc.)
<code>[Flag]</code> enums can combine enum members. To prevent ambiguities, members of a combinable enum require explicitly assigned values, typically in powers of two.</p>
<h3>Nested types</h3>
<p>Can access the private members of containing type.</p>
<h3>Generics</h3>
<ul>
<li>Types templates</li>
<li>type safety and reduction of boxing/unboxing</li>
</ul>
<h4>Covariance and Contravariance</h4>
<p>As of C# 4.0 generic interfaces permit covariance (as do generic delegates), but generic classes do not. Arrays also support covariance. Contravariance is only supported with the generic interfaces.</p>
<ul>
<li>Covariant for OUT Subclass to Base</li>
<li>Contravarient for IN Base to Subclass</li>
</ul>
<h2>Delegates</h2>
<ul>
<li>découple l'appellant de la méthode cible</li>
<li>delegate type : protocole auquelle la cible et l'appellant vont se conformer</li>
<li>delegate instance : objet qui references une ou plusieurs methods à invoquer</li>
<li>immutable</li>
</ul>
<h2>Events</h2>
<ul>
<li>subscriber/broadcaster model</li>
<li>But est de prévenir souscripteurs d'inférer entre eux (suppression d'autres souscripteurs, invocations et breoadcast à d'autre) donc on a le mot clé event</li>
<li>peuvent $etre virtuel, overridden, abstract, seald</li>
</ul>
<h2>Lambda</h2>
<ul>
<li>method sans nom écrite à la place de l'instance du délegué</li>
<li>Closure : lambda qui capture les variables qui sont évaluées au runtime et non au moment de la capture</li>
</ul>
<h2>Threading</h2>
<ul>
<li>Contexte switching 6000 a 8000 cycles processeur. Intérvient quand bcp de threads sont en concurence pour un core pour s'exécuter CPU bound</li>
<li>APM : Asynchronous Programmming Model (Begin, End, IAsyncResult)</li>
<li>EAP : Event based Asynchronous pattern (DownloadAsync, DownloadCompleted)</li>
<li>TAP : Task based asynchrounous model</li>
<li>async/await</li>
<li>but d'utiliser threading : responsiveness, handling slow operations</li>
</ul>
<h2>Collections</h2>
<ul>
<li>Array : performant cat les éléments stockées dans un bloc continu en mémoire</li>
<li>Comparaison : <a href="http://geekswithblogs.net/BlackRabbitCoder/archive/2011/06/16/c.net-fundamentals-choosing-the-right-collection-class.aspx">http://geekswithblogs.net/BlackRabbitCoder/archive/2011/06/16/c.net-fundamentals-choosing-the-right-collection-class.aspx</a></li>
</ul>


        </main>
        <aside class="col-lg-4">
              <article>
                <img class="img-responsive img-circle" src="http://jaskula.fr//img/aside-face200.jpg" />
                <div class="aside-text">
                    <blockquote class="small">
                        <p><cite>Welcome to my blog! F# and functional programming it's what I'm interested in and passionate about at the moment. However, software architecture, software craftsmanship, Domain Driven Design are also topics dear to my heart. So stay tuned! There is more to come...</cite></p>
                          <footer>Tomasz Jaskuła</footer>
                    </blockquote>
                </div>
                <div class="social">
                    <a href="https://www.facebook.com/thomas.jaskula" title="facebook"><img src="http://jaskula.fr//img/facebook.jpg" /></a>
                    <a href="https://github.com/tjaskula" title="github"><img src="http://jaskula.fr//img/github.jpg" /></a>
                    <a href="https://plus.google.com/u/1/106268061202265370189/about" title="google"><img src="http://jaskula.fr//img/google.jpg" /></a>
                    <a href="https://twitter.com/tjaskula" title="twitter"><img src="http://jaskula.fr//img/twitter.jpg" /></a>
                    <a href="http://jaskula.fr//rss.xml" title="rss"><img src="http://jaskula.fr//img/rss.jpg" /></a>
                </div>
            </article>
              <article>
                   <h2>Recent posts</h2>

                      <ul class="articles-list">
                              <li>
                                  <h3><a href="http://jaskula.fr//blog/2016/12-19-data-structures-and-algorithms-helping-santa-claus-find-his-road-to-san-francisco/index.html">Data structures and algorithms - helping Santa Claus find his road to San Francisco</a>
                                      <span>    <time datetime="2016-12-19T10:35:01" pubdate data-updated="true">Dec 19, 2016</time>
</span>
                                  </h3>
                              </li>
                              <li>
                                  <h3><a href="http://jaskula.fr//blog/2016/11-09-back-to-basics-algorithms-finding-the-max-pairwise-product/index.html">Back to basics: Algorithms - finding the max pairwise product</a>
                                      <span>    <time datetime="2016-11-09T08:05:56" pubdate data-updated="true">Nov 9, 2016</time>
</span>
                                  </h3>
                              </li>
                              <li>
                                  <h3><a href="http://jaskula.fr//blog/2015/12-02-data-science-tools-in-f-through-univariante-linear-regression/index.html">Data Science tools in F# through univariante linear regression</a>
                                      <span>    <time datetime="2015-12-02T03:18:24" pubdate data-updated="true">Dec 2, 2015</time>
</span>
                                  </h3>
                              </li>
                              <li>
                                  <h3><a href="http://jaskula.fr//blog/2015/08-14-integrating-ndepend-with-teamcity-9/index.html">Integrating NDepend with TeamCity 9</a>
                                      <span>    <time datetime="2015-08-14T00:10:22" pubdate data-updated="true">Aug 14, 2015</time>
</span>
                                  </h3>
                              </li>
                              <li>
                                  <h3><a href="http://jaskula.fr//blog/2015/01-21-beginners-quick-guide-to-setup-fsblog-and-start-to-blog-in-5-minutes/index.html">Beginners quick guide to setup FsBlog and start to blog in 5 minutes</a>
                                      <span>    <time datetime="2015-01-21T11:55:09" pubdate data-updated="true">Jan 21, 2015</time>
</span>
                                  </h3>
                              </li>
                      </ul>

                  <h4>Blog tags</h4>
                  <p>

                    <a href="http://jaskula.fr//blog/tag/fsharp/">f#</a>&nbsp;(8),                     <a href="http://jaskula.fr//blog/tag/functional-programming/">functional programming</a>&nbsp;(4),                     <a href="http://jaskula.fr//blog/tag/fp/">fp</a>&nbsp;(3),                     <a href="http://jaskula.fr//blog/tag/algorithms/">algorithms</a>&nbsp;(2),                     <a href="http://jaskula.fr//blog/tag/graphs/">graphs</a>&nbsp;(1),                     <a href="http://jaskula.fr//blog/tag/data-structures/">data structures</a>&nbsp;(1),                     <a href="http://jaskula.fr//blog/tag/priority-queue/">priority queue</a>&nbsp;(1),                     <a href="http://jaskula.fr//blog/tag/binary-heap/">binary heap</a>&nbsp;(1),                     <a href="http://jaskula.fr//blog/tag/dijkstra-shortest-path/">dijkstra shortest path</a>&nbsp;(1)                  </p>

                  <h4>Blog archives</h4>
                    <a href="http://jaskula.fr//blog/archive/december-2016/index.html">
                      December 2016 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/november-2016/index.html">
                      November 2016 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/december-2015/index.html">
                      December 2015 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/august-2015/index.html">
                      August 2015 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/january-2015/index.html">
                      January 2015 (2)</a>,                    <a href="http://jaskula.fr//blog/archive/august-2013/index.html">
                      August 2013 (4)</a>,                    <a href="http://jaskula.fr//blog/archive/july-2013/index.html">
                      July 2013 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/october-2012/index.html">
                      October 2012 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/april-2012/index.html">
                      April 2012 (1)</a>,                    <a href="http://jaskula.fr//blog/archive/march-2012/index.html">
                      March 2012 (1)</a>,
              </article>
        </aside>
      </div>
    </div>

      <footer class="bottom">
          <div class="container">
              <div class="row">
                  <div class="col-lg-12">
                      <p>This site is generated using <a href="https://github.com/fsprojects/FsBlog">FsBlog</a> and hosted on <a href="https://github.com/tjaskula/Blog">GitHub</a></p>
                      <p><small>By Tomasz Jaskula, 2015 &mdash; Theme by <a href="https://github.com/matjas">matjas</a></small></p>
                  </div>
              </div>
          </div>

      </footer>

    <script src="http://jaskula.fr//javascripts/scale.fix.js"></script>
  </body>
</html>